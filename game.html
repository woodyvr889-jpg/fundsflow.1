<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Stranger Things Bid Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
@font-face {
  font-family: 'ITC Benguiat';
  src: url('fonts/ITCBenguiat.woff2') format('woff2'),
       url('fonts/ITCBenguiat.woff') format('woff');
  font-weight: normal;
  font-style: normal;
}

/* ============================
   GENERAL STYLING
============================ */
body {
  margin:0;
  padding:0;
  background:#0b0b20; /* dark Stranger Things vibe */
  color:#e50914;
  font-family:'ITC Benguiat', serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
}

#game-container {
  position: relative;
  width: 600px;
  height: 600px;
  background: #111;
  border: 3px solid #e50914;
  display: grid;
  grid-template-columns: repeat(20, 1fr);
  grid-template-rows: repeat(20, 1fr);
  gap: 1px;
}

.cell {
  width: 100%;
  height: 100%;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size: 1.2rem;
  transition: all 0.3s;
}

.collectible {
  animation: glow 1s infinite alternate;
}

@keyframes glow {
  0% { text-shadow: 0 0 5px #fff;}
  50% { text-shadow: 0 0 10px #e50914, 0 0 15px #ff0000; }
  100% { text-shadow: 0 0 5px #fff;}
}

.player {
  font-size: 1.4rem;
  color: #00ffff;
  text-shadow: 0 0 10px #00ffff;
}

.bomb {
  font-size: 1.3rem;
  color: #ff4500;
  animation: pulse 0.8s infinite alternate;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

/* SCORE DISPLAY */
#score-board {
  position: absolute;
  top: -50px;
  font-size: 1.2rem;
}
</style>
</head>
<body>

<div id="score-board">Score: 0</div>

<div id="game-container"></div>

<script>
const container = document.getElementById('game-container');
const rows = 20;
const cols = 20;

let playerPos = {x:10, y:10};
let score = 0;

// ==============================
// GENERATE GRID
// ==============================
const grid = [];
for(let y=0; y<rows; y++){
  const row = [];
  for(let x=0; x<cols; x++){
    const cell = document.createElement('div');
    cell.classList.add('cell');
    container.appendChild(cell);
    row.push(cell);
  }
  grid.push(row);
}

// ==============================
// SPAWN ITEMS
// ==============================
function randomCell(){
  return {x: Math.floor(Math.random()*cols), y: Math.floor(Math.random()*rows)};
}

const collectibles = ['ðŸª™','â¬†ï¸','ðŸ•“'];
const bombs = [];

function spawnCollectible(){
  const pos = randomCell();
  const cell = grid[pos.y][pos.x];
  if(cell.textContent) return; // already occupied
  const emoji = collectibles[Math.floor(Math.random()*collectibles.length)];
  cell.textContent = emoji;
  cell.classList.add('collectible');
}

function spawnBomb(){
  const pos = randomCell();
  const cell = grid[pos.y][pos.x];
  if(cell.textContent) return; // avoid overlapping
  cell.textContent = 'ðŸ’£';
  cell.classList.add('bomb');
  bombs.push({x: pos.x, y: pos.y, timer: 3}); // explodes in 3 secs
}

// Spawn initial items
for(let i=0;i<30;i++) spawnCollectible();
setInterval(spawnCollectible, 5000); // new collectible every 5s
setInterval(spawnBomb, 8000); // new bomb every 8s

// ==============================
// PLAYER
// ==============================
function renderPlayer(){
  // Clear previous
  grid.flat().forEach(c=>{ if(!c.classList.contains('bomb') && !c.classList.contains('collectible')) c.textContent = ''; });
  grid[playerPos.y][playerPos.x].textContent = 'ðŸ˜Ž';
  grid[playerPos.y][playerPos.x].classList.add('player');
}
renderPlayer();

// ==============================
// MOVEMENT
// ==============================
document.addEventListener('keydown', (e)=>{
  let newX = playerPos.x;
  let newY = playerPos.y;
  if(e.key==='ArrowUp') newY--;
  if(e.key==='ArrowDown') newY++;
  if(e.key==='ArrowLeft') newX--;
  if(e.key==='ArrowRight') newX++;

  // Boundaries
  if(newX<0||newX>=cols||newY<0||newY>=rows) return;

  const targetCell = grid[newY][newX];

  // Check collectibles
  if(targetCell.classList.contains('collectible')){
    score += 100;
    targetCell.classList.remove('collectible');
  }

  // Check bomb
  if(targetCell.classList.contains('bomb')){
    alert('ðŸ’¥ Boom! Game over!');
    score = 0;
    bombs.forEach(b=>grid[b.y][b.x].textContent='');
    bombs.length=0;
    // Reset player
    playerPos={x:10,y:10};
  } else {
    playerPos.x=newX;
    playerPos.y=newY;
  }

  renderPlayer();
  document.getElementById('score-board').textContent = 'Score: '+score;
});

// ==============================
// BOMB TIMER & EXPLOSIONS
// ==============================
setInterval(()=>{
  for(let i=bombs.length-1;i>=0;i--){
    bombs[i].timer--;
    if(bombs[i].timer<=0){
      const b = bombs[i];
      const cell = grid[b.y][b.x];
      cell.textContent='ðŸ’¥';
      cell.classList.remove('bomb');
      bombs.splice(i,1);
      setTimeout(()=>{ cell.textContent=''; }, 500); // remove explosion after 0.5s
    }
  }
},1000);

</script>
</body>
</html>
